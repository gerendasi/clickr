<!doctype htmL>
<html>
    <head>
        <meta charset="UTF-8">
            <meta property="og:title" content="Clickr" />
            <meta property="og:description"
            content="Clickr One testbed" />
            <meta property="og:url" content="http://clickr.io" />
            <meta property="og:image" content="http://clickr.io/clickr-profile.png" />
            <link href="../css/home.css" rel="stylesheet" type="text/css">
                <style type="text/css">
                    @font-face {
                        font-family: "sf";
                        src: url(../css/sf.otf);
                    }
                p.sf {
                    font-family: "sf", Verdana, Tahoma;
                }
                </style>
                <title>Clickr</title>
                <head profile="http://www.w3.org/2005/10/profile">
                    <link rel="icon"
                        type="image/png"
                        href="../img/favicon.png">
                <meta-name="description=" content="Clickr test bed">
                <meta name="robots" content="no index, no follow">
                <![endif]-->
                </head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <body>
        <div class="container">
            <header>
            <button id="plusbutton"  onclick="sparkSetPos('8');sleep(320)">Click</button>
            <br>
            <P>Current: <span id="curPos"></span>
            <br>
            <script type="text/javascript">
                var deviceID    = "54ff71066678574958310667";
                var accessToken = "24a4f090cf2ed8baaae5ce22de1ed8f99a696620";
                var setFunc = "setpos";
                var getFunc = "getpos";
                window.setInterval(function() {
                                   requestURL = "https://api.spark.io/v1/devices/" + deviceID + "/" + getFunc + "/?access_token=" + accessToken;
                                   $.getJSON(requestURL, function(json) {
                                             document.getElementById("curPos").innerHTML = json.result + "&deg;";
                                             document.getElementById("curPos").style.fontSize = "2vmax";
                                             });
                                   }, 1500);
                                   function setValue(obj) {
                                       var newValue = document.getElementById('degBoxId').value;
                                       sparkSetPos(newValue);
                                   }
            function fineAdjust(value) {
                var currentValue = parseInt(document.getElementById('curPos').innerHTML);
                var setValue = value + currentValue;
                sparkSetPos(setValue);
                document.getElementById("degBoxId").value = setValue;
            }
            function sparkSetPos(newValue) {
                var requestURL = "https://api.spark.io/v1/devices/" +deviceID + "/" + setFunc + "/";
                $.post( requestURL, { params: newValue, access_token: accessToken });
            }
            function sleep(milliseconds) {
                var start = new Date().getTime();
                for (var i = 0; i < 1e7; i++) {
                    if ((new Date().getTime() - start) > milliseconds){
                        break;
                    }
                }
                var requestURL = "https://api.spark.io/v1/devices/" +deviceID + "/" + setFunc + "/";
                $.post( requestURL, { params:35, access_token: accessToken });
            }
                </script>
            <br /><br /><br /><a href="http://www.clickr.io/z/password_protect.php?logout=1">Log out</a>
            </header>
            </div>
    </body>
</html>
